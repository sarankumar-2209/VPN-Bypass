<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Real IP Detector</title>
</head>
<body>
    <h1>IP Detection Results</h1>
    <p><strong>Remote IP:</strong> {{ remote_ip }}</p>
    <p><strong>X-Forwarded-For:</strong> {{ x_forwarded_for }}</p>
    <p><strong>X-Real-IP:</strong> {{ x_real_ip }}</p>
    <p><strong>User-Agent:</strong> {{ user_agent }}</p>

    <h2>WebRTC IP Leak Test</h2>
    <pre id="webrtc-output">Scanning...</pre>

    <script>
        (function(){
            const output = document.getElementById("webrtc-output");
            const rtc = new RTCPeerConnection({iceServers: []});
            rtc.createDataChannel("");
            rtc.createOffer().then(offer => rtc.setLocalDescription(offer));

            rtc.onicecandidate = evt => {
                if (evt && evt.candidate) {
                    const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
                    const ipMatch = evt.candidate.candidate.match(ipRegex);
                    if (ipMatch && ipMatch[1]) {
                        output.textContent += "WebRTC IP: " + ipMatch[1] + "\n";
                    }
                }
            };
        })();
    </script>
</body>
</html>
